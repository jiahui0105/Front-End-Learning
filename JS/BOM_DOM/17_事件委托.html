<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="div1">
    <ul id="ul1">
        <li>1111</li>
        <li>2222</li>
        <li>3333</li>
    </ul>
</div>


<button id="add">add</button>
<script>
    var aLi = document.getElementsByTagName('li');
    var oBtn = document.getElementById('add');
    var oUl = document.getElementById('ul1');

    //事件委托   或者  事件代理：动态添加的元素（后生成的元素）不能直接绑定事件，需要给已存在的父元素绑定一个事件

    // 优点1：定义函数只定义一次 然而for循环会执行多次 浪费空间
    oUl.onclick = function(e){
        // console.log(this);//在事件处理函数里 this->绑定该事件的dom对象 即Ul
        console.log(e.target.innerHTML);// e.target获取真正点击触发的事件源 即li
        // console.log(e.currentTarget.innerHTML);// e.currentTarget当前事件绑在Ul上 则捕获Ul
        // e.stopPropagation();
    };

    //        for(var i=0;i<aLi.length;i++){
    //            aLi[i].onclick = function(){
    //                console.log(this.innerHTML);
    //            }
    //        }

    // 优点2：有效解决后生成元素绑不上事件问题
    oBtn.onclick = function(){
        var oLi = document.createElement('li');
        oLi.innerHTML = Math.random();
        oUl.appendChild(oLi);
    }

</script>
</body>
</html>